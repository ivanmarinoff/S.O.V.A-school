{% extends 'global_content/stream_navbar.html' %}
{% block stream_navbar_content %}

{#    <div class="container">#}
{#        <div class="row">#}
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <br><br><br><br>




                        <h2 class="h2">School Stream !</h2>
                        <!-- Your existing HTML content here -->
                        <video id="video" class="video-stream" width="1080" height="720" controls></video>
                        <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
                        <!-- Or if you want a more recent alpha version -->
                        <!-- <script src="https://cdn.jsdelivr.net/npm/hls.js@alpha"></script> -->
                        <script>
                            const video = document.getElementById("video");
                            const videoSrc = "http://localhost:8080/hls/test.m3u8";
                            if (Hls.isSupported()) {
                                const hls = new Hls();
                                hls.loadSource(videoSrc);
                                hls.attachMedia(video);
                            }
                                // hls.js is not supported on platforms that do not have Media Source
                                // Extensions (MSE) enabled.
                                //
                                // When the browser has built-in HLS support (check using `canPlayType`),
                                // we can provide an HLS manifest (i.e. .m3u8 URL) directly to the video
                                // element through the `src` property. This is using the built-in support
                                // of the plain video element, without using hls.js.
                                //
                                // Note: it would be more normal to wait on the 'canplay' event below however
                                // on Safari (where you are most likely to find built-in HLS support) the
                                // video.src URL must be on the user-driven white-list before a 'canplay'
                                // event will be emitted; the last video event that can be reliably
                            // listened-for when the URL is not on the white-list is 'loadedmetadata'.
                            else if (video.canPlayType("application/vnd.apple.mpegurl")) {
                                video.src = videoSrc;
                            }
                        </script>


                        <div id="errorMessage" style="display: none;">
                            Live stream is not available at the moment
                        </div>

                        <script>
                            var video = document.getElementById("video");

                            video.onerror = function () {
                                // Show the error message if the video fails to load
                                document.getElementById("errorMessage").style.display = "block";
                            };
                        </script>

                        <button onclick="history.back()">Go Back</button>
                    </div>
                </div>
            </div>

    <style>
        .video-stream {
            transform: scaleX(1);
            display: block;
            margin: 0 auto;
        }
    </style>
    <style>
    .h2 {
        text-align: center;
        color: #e44c65;
        text-shadow: 2px 2px 4px #000000;
        text-blink: blink 3s infinite;
    }
    </style>
{% endblock stream_navbar_content %}



